<nav-bar></nav-bar>
<div class="container" ng-controller="HomeController as home">
    <div class="alert alert-danger" ng-show="home.itemInCart" role="alert">
        <strong>{{home.error}}!</strong> {{home.errorMessage}}
    </div>
    <div id="products" class="row list-group">
        <div class="pull-left-div item col-sm-6" ng-repeat="item in home.items track by (item._id + $index)">
            <label style="color: #083858;">{{item.name}}</label>
            <br/>
            <div class="item col-sm-4"
                 ng-repeat="subItem in item.listItems track by (subItem._id + $index)"
                 ng-click="home.prepareOrder(subItem)">
                <div class="thumbnail">
                    <img class="group list-group-image" ng-src="{{subItem.imageStream}}" alt=""/>
                    <div class="caption">
                        <h4 class="group center-block list-group-item-heading">
                            {{subItem.itemName}}
                        </h4>
                        <h4 class="group center-block list-group-item-heading">
                            {{subItem.price}}
                        </h4>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <hr class="pull-left-div" style="height:1px;border:none;color:#333;background-color:#333;"/>

    <div id="orderProducts" class="row list-group">
        <div class="item col-sm-2" ng-repeat="orderItem in home.selectedItems track by (orderItem._id + $index)">
            <div class="thumbnail">
                <img class="group list-group-image" ng-src="{{orderItem.imageStream}}" alt=""/>
                <div class="caption">
                    <h4 class="group center-block list-group-item-heading">
                        {{orderItem.itemName}}
                    </h4>
                    <div class="form-inline">
                        <div class="form-group">
                            <label class="col-sm-9 order-price-text">
                                Price: {{orderItem.price}} x
                            </label>
                            <input class="col-sm-3 order-text" title="orderTI" type="number" ng-maxlength="2"
                                   ng-model="orderItem.numberOfOrders" order-count/>
                            <button class="col-sm-4 btn btn-danger order-del"
                                    ng-click="home.itemCountChanged(orderItem)">Del
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="input-group-addon" style="display: inline-table">
            <select class="form-control" style="width: 150px;" title="store-selection" name="store" id="storeSelect"
                    ng-model="home.paymentMethod">
                <option disabled value="">Payment Method</option>
                <option ng-repeat="method in home.paymentMethods" value="{{method.name}}">{{method.name}}</option>
            </select>

            <input type="number" class="form-control" ng-model="home.discount"
                   ng-disabled="home.selectedItems.length === 0"
                   style="width: 100px" placeholder="Enter discount" discount/>
            <div class="form-inline">
                <label>Total Amout:</label>
                <label><strong>{{home.orderPrice}}</strong></label>
            </div>
            <button type="submit" class="btn btn-default" ng-disabled="home.selectedItems.length === 0"
                    ng-click="home.placeOrder()">Order
            </button>
        </div>
    </div>
</div>